---
import Base from '../layout/Base.astro';
import Counter from "../components/counter-app/counter/counter";
import Container from '../components/Container.astro';
import '../styles/global.scss';
import { Image } from "astro:assets";
import InfoBox from '../components/parts/InfoBox/InfoBox.astro';
import cardSpade1 from '/public/images/cards/card-spade-1.svg';
import cardSpade2 from '/public/images/cards/card-spade-2.svg';
import cardSpade10 from '/public/images/cards/card-spade-10.svg';
import cardHeart10 from '/public/images/cards/card-heart-10.svg';
import cardDiamond10 from '/public/images/cards/card-diamond-10.svg';
import cardDiamond12 from '/public/images/cards/card-diamond-12.svg';
import cardSpade11 from '/public/images/cards/card-spade-11.svg';
import cardSpade12 from '/public/images/cards/card-spade-12.svg';
import cardSpade13 from '/public/images/cards/card-spade-13.svg';
import cardHeart1 from '/public/images/cards/card-heart-1.svg';
import cardHeart2 from '/public/images/cards/card-heart-2.svg';
import cardHeart3 from '/public/images/cards/card-heart-3.svg';
import cardHeart4 from '/public/images/cards/card-heart-4.svg';
import imgDraw from '/public/images/cards/draw.svg';
import imgSetup from '/public/images/cards/setup.svg';

---

<Base>
	<div class="wrap">
    <div class="mv">
      <h1>HOW TO PLAY</h1>
    </div>
		<Container>
			<div class="rule">
        <h2>ゲームの目的</h2>
        <p>各プレイで手札の合計点数を最も少なくすることを目指します。ラウンドを繰り返し行い、累積得点が最も少ないプレイヤーが最終的な勝者となります。</p>

        <h2>プレイ人数</h2>
        <p>2人以上<br />(推奨は4〜6人)</p>


        <h2>使用するカード</h2>
        <p>ジョーカーを除いた52枚のトランプを使用します。</p>

        <h2>点数の数え方</h2>
        <ul>
          <li>エース（A）：1点</li>
          <li>2～10：表示されている数字通りの点数</li>
          <li>フェイスカード（J、Q、K）：10点</li>
        </ul>

        <div class="example">
          <div class="example__block">
            <div class="example__block-title">エース（A）：1点</div>
            <div class="example__block-cards">
              <div class="example__block-card">
                <Image src={cardSpade1} width={48} height={68} alt="エース" />
              </div>
            </div>
          </div>
          <div class="example__block">
            <div class="example__block-title">2～10：表示されている数字通りの点数</div>
            <div class="example__block-cards">
              <div class="example__block-card">
                <Image src={cardSpade2} width={48} height={68} alt="2" />
              </div>
              <div class="example__block-card -wavy">
                〜
              </div>
              <div class="example__block-card">
                <Image src={cardSpade10} width={48} height={68} alt="10" />
              </div>
            </div>
          </div>
          <div class="example__block">
            <div class="example__block-title">フェイスカード（J、Q、K）：10点</div>
            <div class="example__block-cards">
              <div class="example__block-card">
                <Image src={cardSpade11} width={48} height={68} alt="ジャック" />
              </div>
              <div class="example__block-card">
                <Image src={cardSpade12} width={48} height={68} alt="クイーン" />
              </div>
              <div class="example__block-card">
                <Image src={cardSpade13} width={48} height={68} alt="キング" />
              </div>
            </div>
          </div>
        </div>

        <!-- <div class="card-point">
          <ul class="card-point__list">
            <li class="card-point__item">
              <ul class="card-point__card-list">
                <li class="card-point__card-item">
                  <Image src={cardSpade1} width={48} height={68} alt="エース" />
                </li>
              </ul>
              <span>1点</span>
            </li>
            <li class="card-point__item">
              <ul class="card-point__card-list">
                <li class="card-point__card-item">
                  <Image src={cardSpade2} width={48} height={68} alt="2" />
                </li>
                <li class="card-point__card-item -wavy">
                  〜
                </li>
                <li class="card-point__card-item">
                  <Image src={cardSpade10} width={48} height={68} alt="10" />
                </li>
              </ul>
              <span>2点〜10点</span>
            </li>
            <li class="card-point__item">
              <ul class="card-point__card-list">
                <li class="card-point__card-item">
                  <Image src={cardSpade11} width={48} height={68} alt="ジャック" />
                </li>
                <li class="card-point__card-item">
                  <Image src={cardSpade12} width={48} height={68} alt="クイーン" />
                </li>
                <li class="card-point__card-item">
                  <Image src={cardSpade13} width={48} height={68} alt="キング" />
                </li>
              </ul>
              <span>10点</span>
            </li>
          </ul>
        </div> -->

        <h2>ゲームの目的</h2>
        <p>各プレイで手札の合計点数を最も少なくすることを目指します。ラウンドを繰り返し行い、累積得点が最も少ないプレイヤーが最終的な勝者となります。</p>

        <h2>準備</h2>
        <h3>1. デッキの準備</h3>
        <p>ジョーカー2枚をデッキから取り除き、52枚のカードをよくシャッフルします。</p>

        <h3>2. カードの配布</h3>
        <p>各プレイヤーに5枚ずつカードを裏向きで配ります。</p>

        <h3>3. 場のセットアップ</h3>
        <p>山札を中央に置きます。<br />山札の一番上のカードを表向きにして捨て札の山を作ります。</p>

        <div class="setup">
        <Image src={imgSetup} width={80} height={54} alt="" />
        </div>

        <h2>ラウンドの進行</h2>
        <p>ラウンドは時計回りに進行します。</p>

        <h2>ターンの流れ</h2>

        <h3>1. ショウの宣言（任意）</h3>
        <p>自分のターンの開始時に、手札の合計点数が5点以下の場合、「ショウ」を宣言することができます。</p>

        <InfoBox type="warning" icon="warning">
          <strong>注意：</strong>一度でもカードを捨てたり引いた後は、このターンで「ショウ」を宣言することはできません。
        </InfoBox>

        <h3>2. カードを捨てる</h3>
        <p>手札から<strong>任意の1枚のカード</strong>か、<strong>以下の組み合わせの複数枚のカード</strong>を表向きで捨てます。</p>
        
        <h4>同じ数字の組み合わせ</h4>

        <p>同じ数字のカードが2枚以上。</p>

        <div class="example">
          <div class="example__block">
            <div class="example__block-title">例）スペードの10、ハートの10</div>
            <div class="example__block-cards">
              <div class="example__block-card">
                <Image src={cardSpade10} width={48} height={68} alt="10" class="card" />
              </div>
              <div class="example__block-card">
                <Image src={cardHeart10} width={48} height={68} alt="10" class="card" />
              </div>
            </div>
          </div>
          <div class="example__block">
            <div class="example__block-title">例）スペードの10、ハートの10、ダイヤの10</div>
            <div class="example__block-cards">
              <div class="example__block-card">
                <Image src={cardSpade10} width={48} height={68} alt="10" class="card" />
              </div>
              <div class="example__block-card">
                <Image src={cardHeart10} width={48} height={68} alt="10" class="card" />
              </div>
              <div class="example__block-card">
                <Image src={cardDiamond10} width={48} height={68} alt="10" class="card" />
              </div>
            </div>
          </div>
        </div>

        <h4>同じスートで、3枚以上の連続した数字の組み合わせ</h4>
        
        <p>同じスートで連続した数字のカードが3枚以上。</p>

        <div class="example">
          <div class="example__block">
            <div class="example__block-title">例）スペードの10、ジャック、クイーン</div>
            <div class="example__block-cards">
              <div class="example__block-card">
                <Image src={cardSpade10} width={48} height={68} alt="10" class="card" />
              </div>
              <div class="example__block-card">
                <Image src={cardSpade11} width={48} height={68} alt="ジャック" class="card" />
              </div>
              <div class="example__block-card">
                <Image src={cardSpade12} width={48} height={68} alt="クイーン" class="card" />
              </div>
            </div>
          </div>

          <div class="example__block">
            <div class="example__block-title">例）ハートのエース、2、3、4</div>
            <div class="example__block-cards">
              <div class="example__block-card">
                <Image src={cardHeart1} width={48} height={68} alt="エース" class="card" />
              </div>
              <div class="example__block-card">
                <Image src={cardHeart2} width={48} height={68} alt="2" class="card" />
              </div>
              <div class="example__block-card">
                <Image src={cardHeart3} width={48} height={68} alt="3" class="card" />
              </div>
              <div class="example__block-card">
                <Image src={cardHeart4} width={48} height={68} alt="4" class="card" />
              </div>
            </div>
          </div>
        </div>

        スートが異なる場合や、キング、エース、2のような並びの場合は組み合わせとして成立しません。

        <div class="example">
          <div class="example__block -ng">
            <div class="example__block-title">NG例）スートが異なっている</div>
            <div class="example__block-cards">
              <div class="example__block-card">
                <Image src={cardHeart10} width={48} height={68} alt="10" class="card" />
              </div>
              <div class="example__block-card">
                <Image src={cardSpade11} width={48} height={68} alt="ジャック" class="card" />
              </div>
              <div class="example__block-card">
                <Image src={cardDiamond12} width={48} height={68} alt="クイーン" class="card" />
              </div>
            </div>
          </div>

          <div class="example__block -ng">
            <div class="example__block-title">NG例）キングからエースの並びになっている</div>
            <div class="example__block-cards">
              <div class="example__block-card">
                <Image src={cardSpade13} width={48} height={68} alt="キング" class="card" />
              </div>
              <div class="example__block-card">
                <Image src={cardSpade1} width={48} height={68} alt="エース" class="card" />
              </div>
              <div class="example__block-card">
                <Image src={cardSpade2} width={48} height={68} alt="2" class="card" />
              </div>
            </div>
          </div>
        </div>

        <h3>3. カードを引く</h3>
        <p>以下のいずれかを選び、カードを1枚引きます。</p>
        <ul>
          <li>山札から一番上のカードを1枚引く。</li>
          <li>捨て札の山の一番上のカードを1枚引く。</li>
        </ul>

        <div class="draw">
        <Image src={imgDraw} width={628} height={452} alt="" />
        </div>

        <p>もし自分の前のプレイヤーがカードを2枚以上捨てた場合は、その中から1枚を選んで引くことができます。</p>

        <h3>4. ターンの終了</h3>
        <p>次のプレイヤーに順番が移ります。</p>

        <h2>ショウの宣言とラウンドの終了</h2>
        <p>ターン開始時に手札の合計点数が5点以下の場合は、「ショウ」を宣言することができます。</p>

        <p>プレイヤーの誰かがショウを宣言した時点で、そのラウンドは終了します。</p>

        <p>全員が手札を公開し、手札の合計点数を計算します。</p>

        <h3>ショウの成功条件</h3>
        <p>ショウを宣言したプレイヤーの点数が他のプレイヤーよりも低い場合、ショウが成功となり、ラウンドの勝者となります。</p>

        <h3>ショウ返し</h3>

        <p>「ショウ」を宣言したプレイヤーよりも点数が少ないプレイヤーがいた場合、「ショウ返し」となります。</p>

        <p>得点の計算方法は次のセクションを参考にしてください。</p>

        <h2>得点計算</h2>

        <p>各プレイヤーは、手札のカードの合計点数を計算します。</p>

        <h3>ショウが成功した場合</h3>
        <p>「ショウ」を宣言したプレイヤーの手札の合計点数が他の全員よりも少ない場合、そのプレイヤーの得点は0点となります。</p>

        <p>他のプレイヤーはそれぞれ自分の手札の合計点数がそのまま得点となります。</p>

        <h3>「ショウ返し」が起こった場合</h3>
        <p>ショウ返しが成立した場合、ショウを宣言したプレイヤーは自分の手札の合計点数 + 30点を加算します。</p>
        <p>ショウ返ししたプレイヤー（合計点数が最も少ないプレイヤー）は0点となります。</p>
        <p>それ以外のプレイヤーは手札の合計が加算されます。</p>

        <InfoBox>
          <p>ショウ返ししたプレイヤーが複数人いた場合は、合計点数が最も少ないプレイヤーのみ0点となります。</p>

          <p>合計点数が最も少ないプレイヤーが複数人いた場合は、手札の枚数が少ないプレイヤーが優先されます。手札の枚数も同じ場合は、そのプレイヤー全員が0点として扱います。</p>
        </InfoBox>

        <h3>累積得点</h3>

        <p>各ラウンドごとに得点を計算し、各プレイヤーの累積得点に加算します。</p>


        <h3>次のラウンドを開始</h3>

        <p>累積得点が100点を超えているプレイヤーがいなければ、次のラウンドを開始します。</p>

        <p>前回のラウンドで最初にプレイしたプレイヤーの右隣のプレイヤーからスタートします。</p>

        <h2>ゲームの終了と勝敗</h2>

        <h3>バースト</h3>
        <p>いずれかのプレイヤーの累積得点が100点を超えた時点で、ゲームが終了します。</p>

        <h3>勝者の決定</h3>
        <p>累積得点が最も少ないプレイヤーが勝者となります。</p>
        
      </div>
		</Container>
	</div>
</Base>

<style lang="scss">

.wrap {
  padding-top: 4.5rem;
}

.mv {
  // height: 30svh;
  position: relative;
	aspect-ratio: 16 / 9;
	background-image: url('/images/rules.png');
	background-size: cover;
	overflow: hidden;
  display: flex;
  align-items: center;
  justify-content: center;

  &::before {
		content: '';
		width: 100%;
		height: 100%;
		position: absolute;
		left: 0;
		top: 0;
		background-image: linear-gradient(to right bottom, rgba(0, 0, 0, 0) 0, rgba(0, 0, 0, 0.4) 30%, rgba(0, 0, 0, 0.4) 70%, rgba(0, 0, 0, 0) 100%);
		z-index: 1;
	}


  h1 {
    font-size: 3.2rem;
    font-family: 'Poppins';
		font-weight: bold;
		color: white;z-index: 2;
  }
  
}

.rule {
  padding:6.4rem 0;
  

  font-size: 1.6rem;
    font-weight: 400;
    letter-spacing: normal;
    line-height: 1.75;
    color: #01112c;

  h2 {
    font-weight: bold;
    font-size: 2.2rem;
    border-bottom: .1rem solid #e1e3ec;
    padding-bottom: .5rem;
    font-family: 'IBM Plex Sans JP', sans-serif;
  }

  h3 {
    font-size: 2rem;
    font-weight: bold;
  }

  h4 {
    font-size: 1.8rem;
    font-weight: bold;
  }

  p {
    font-family: 'Inter Variable', sans-serif;
    font-family: 'IBM Plex Sans JP', sans-serif;
  }

  ul:not([class]) {

    li {
      position: relative;
      padding-left: .7em;

      &::before {
        content: '';
        width: .4rem;
        height: .4rem;
        background-color:black;
        border-radius: 50%;
        position: absolute;
        left: 0;
        top: 1.1rem;
      }
    }
  }

  ol {
    counter-reset: number;

    & > li {
      position: relative;
      padding-left: 1em;
      counter-increment: number;

      &::before {
        content: counter(number) '.';
        position: absolute;
        left: 0;
        top: 0;
      }
    }
  }

  & > *:first-child {
    margin-top: 0;
  }

  &  > * {
    margin-top: 1.6rem;
  }


  // marings
  h2 {
    margin-top: 4rem;
  }

  h3 {
    margin-top: 3.2rem;
  }

  h3 + * {
    margin-top: 1.2rem;
  }

  h4 {
    margin-top: 2.4rem;
  }

  h4 + * {
    margin-top: 1rem;
  }
}

.card-point {
  background: #414044;
  padding: 0.8rem 2.4rem;

  &__list {
    display: flex;
    flex-direction: column;
  }

  &__item {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: 1.6rem 0;
    border-bottom: .1rem dashed #6b6b6b;


    &:last-child {
    border-bottom:none;

    }

    span {
      color: white;
    }
  }

  &__card {
  }

  &__card-list {

    display: flex;
    gap: .8rem;
  }

  &__card-item {
    width: 5.6rem;
    display: flex;
    align-items: center;
    justify-content: center;

    &.-wavy {
      color: white;
      width: 2.4rem;
    }
  }
}

.card {
  
}

.example {
  margin: 3.2rem 0;

  &__block {
    border: .1rem solid #e1e3ec;
    padding: 1.2rem;

    &.-ng {
      background: #ffe1e1;
      border-color: #ff8686;
      border: none;
    }
  }

  &__block + &__block {
    margin-top: 1.6rem;
  }

  &__block-title {
    font-size: 1.4rem;
    font-weight: 600;
  }

  &__block-cards {
    display: flex;
    gap: 1rem;
    margin-top: .4rem;
  }

  &__block-card {
    border: .1rem solid #cbcbcb;
    border-radius: .4rem;
    overflow: hidden;
    width: 5.6rem;
    display: flex;

    &.-wavy {
      border: none;
      width: 1.4rem;
      align-self: center;justify-content: center;
    }
  }
}

.draw, .setup {
  padding: 2.8rem 9rem 2.4rem;
  background-color: #e8e8e8;
  display: flex;
}

</style>